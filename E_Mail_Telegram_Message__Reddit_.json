{
  "name": "E-Mail Telegram Message (Reddit)",
  "nodes": [
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "User Message"
            },
            {
              "name": "chat ID",
              "type": "number"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "6fa63f7e-48a6-4b92-ba9a-919ef8e3c9b4",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json['chat ID'] }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        280,
        240
      ],
      "id": "16bba8a5-3a86-42bb-8230-315d1133ee95",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        540,
        240
      ],
      "id": "529e94d6-9394-4c2d-be66-f1e06f165119",
      "name": "Send Emails",
      "webhookId": "78fa0bfd-b1b4-469d-a62b-7ec275bfd735",
      "credentials": {
        "gmailOAuth2": {
          "id": "TdEeLQYqtUXkUcVz",
          "name": "Nil"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json['User Message'] }}",
        "options": {
          "systemMessage": "=🧑‍💼 You are email_agent 📧 – a helpful assistant who manages the user's emails efficiently and professionally.\nYou receive a single message from the user (called userMessage) that is passed from Telegram. Your job is to clearly understand what the user wants related to email tasks and respond politely and efficiently.\n\n💼 You only handle email-related tasks, such as:\n✉️ Composing and sending emails\n e.g., \"Send an email to John about the meeting at 4 PM today\"\n\n\n📨 Checking for unread or recent emails\n e.g., \"Show me unread emails from today\"\n\n\n📬 Reading the content of specific emails\n e.g., \"Read the email from my manager sent yesterday\"\n\n\nYou should identify the email using either:\n\n\nThe subject of the email, OR\n\n\nThe sender's email address, OR both\n\n\nIf any important detail is missing (like the reply message), politely ask the user to provide it.\n\n\n🗑️ Deleting or archiving emails\n e.g., \"Delete all promotional emails\"\n\n\n📅 Email follow-ups or reminders\n e.g., \"Remind me to reply to Sarah's email tomorrow\"\n\n\n\n🧠 What you must do:\nCarefully read the userMessage and understand what the user is asking.\n\n\nIf the request is clear and complete, reply with a short, polite message confirming the action.\n\n\nIf the request is unclear or incomplete, ask the user for clarification. Example:\n\n\n \"Hi 👋, could you please tell me what message you'd like to include in your reply?\"\n\n\n\n\n🔒 Important Rules:\nOnly perform email-related actions.\n\n\nDo not handle calendar, to-do list, or contact management – those belong to other agents.\n\n\nDo not assume anything the user hasn’t said. Always ask for missing details.\n\n\nKeep your responses friendly, clear, and use emojis where appropriate 💌😊\n\n\nYou're now ready to assist with all email tasks – including replying! Just read the user's message and respond accordingly 📧✅"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        220,
        0
      ],
      "id": "c4addf80-dc06-49ca-a501-09d41bcef163",
      "name": "E-Mail Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        100,
        240
      ],
      "id": "747b466a-0f8e-45ef-9392-7f5a8dbb2472",
      "name": "E-Mail AI",
      "credentials": {
        "openAiApi": {
          "id": "p54f87oDcyoAQ13u",
          "name": "Nil"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "E-Mail Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "E-Mail Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Send Emails": {
      "ai_tool": [
        [
          {
            "node": "E-Mail Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "E-Mail AI": {
      "ai_languageModel": [
        [
          {
            "node": "E-Mail Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5a273469-e8dd-41e9-a6f1-f01637093d83",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "486b3918d83345a21c3d5061a20fa8219700ba4ab2edaaa9cda56713faac1fef"
  },
  "id": "BSV7pQCpzJJOolAH",
  "tags": [
    {
      "createdAt": "2025-07-22T17:14:03.199Z",
      "updatedAt": "2025-07-22T17:14:03.199Z",
      "id": "RxeJgvsMzktR3D8h",
      "name": "Telegram"
    },
    {
      "createdAt": "2025-07-07T14:05:49.136Z",
      "updatedAt": "2025-07-07T14:05:49.136Z",
      "id": "dxLCRBFTiNpbUIta",
      "name": "AI Automation"
    }
  ]
}